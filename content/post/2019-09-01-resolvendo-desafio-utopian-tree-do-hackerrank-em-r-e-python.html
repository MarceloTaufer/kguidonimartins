---
title: Resolvendo desafio "Utopian Tree" do HackerRank em R e python
author: Karlo Guidoni Martins
date: '2019-09-01'
slug: resolvendo-desafio-utopian-tree-do-hackerrank-em-r-e-python
categories:
  - post
tags:
  - R
  - challenge
  - python
description: ''
topics: []
---



<p>Dias atrás recebi um <a href="https://www.hackerrank.com/challenges/utopian-tree/problem?">link</a> para um desafio do site <a href="https://www.hackerrank.com">HackerRank</a>. O desafio fazia parte de uma das etapas do processo seletivo para a vaga de analista de dados de uma empresa que oferece serviços de transporte privado contratados por aplicativo de celular. Eu resolvi esse desafio usando as linguagens R e python. Eu resolvi escrever um post sobre isso pois a submissão do teste em R é diferente da submissão em python.</p>
<div id="definicao-do-desafio-utopian-tree" class="section level2">
<h2>Definição do desafio “Utopian Tree”</h2>
<p>A árvore utópica do desafio tem dois ciclos de crescimento a cada ano.</p>
<ul>
<li>Na primavera, a árvore dobra de tamanho.</li>
<li>No verão, a árvore cresce um metro.</li>
</ul>
<p>A descrição do desafio informa que uma muda da árvore utópica com um metro de altura foi plantada no início da primavera e pergunta: <em>qual seria o tamanho dessa árvore após <span class="math inline">\(n\)</span> ciclos de crescimento?</em> Por exemplo, se a árvore passou por cinco ciclos de crescimento (<span class="math inline">\(n\)</span> = 5), sua altura final deveria ser 14 metros, como informa a tabela abaixo:</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
Ciclo
</th>
<th style="text-align:left;">
Altura
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
14
</td>
</tr>
</tbody>
</table>
<div id="descricao-da-funcao" class="section level3">
<h3>Descrição da função</h3>
<p>O desafio pede para que seja criada a função <code>utopianTree</code>. Esta função deve conter apenas o argumento/parâmetro <code>n</code>, que é um número inteiro que informa por quantos ciclos de crescimento a árvore utópica passará. A função deve retornar um número inteiro com o tamanho final da árvore.</p>
</div>
<div id="dados-de-entrada-e-de-saida" class="section level3">
<h3>Dados de entrada e de saída</h3>
<p>Os dados de entrada são fornecidos pelo próprio site do desafio e devem ser lidos pelo “stdin”. Um exemplo dos dados de entrada:</p>
<pre><code>3
0
1
4</code></pre>
<p>A primeira linha informa quantas vezes a função será testada. Os valores de <span class="math inline">\(n\)</span> que serão testados pela função são informados a partir da segunda linha. Pelo “stdout”, a função deve informar a altura da árvore a cada teste realizado. Usando os dados de entrada definidos acima, os resultados informados pela função devem ser:</p>
<pre><code>1
2
7</code></pre>
</div>
</div>
<div id="construindo-a-funcao-em-python" class="section level2">
<h2>Construindo a função em python</h2>
<p>Vou começar pela função em python que deu menos dor de cabeça na hora da submissão.</p>
<pre class="python"><code>def utopianTree(n):
    # altura inicial
    height = 1
    # se a árvore não passou por nenhum ciclo, sua altura é igual à inicial.
    if n == 0:
        return height
    # do contrário, é necessário definir os ciclos de primavera e os de verão.
    else:
        for cycle in range(1, n + 1):
            # ciclos de primavera.
            if cycle % 2 != 0:
                height *= 2
            # ciclos de verão.
            elif cycle % 2 == 0:
                height += 1

        return height</code></pre>
<p>Usando os dados da tabela, se a árvore passar por 2 ciclos, o resultado deve ser igual a 3.</p>
<pre class="python"><code>utopianTree(2)</code></pre>
<pre><code>## 3</code></pre>
<p>Mas se a árvore passar por 4 ciclos, o resultado deve ser igual a 7.</p>
<pre class="python"><code>utopianTree(4)</code></pre>
<pre><code>## 7</code></pre>
<div id="submissao" class="section level3">
<h3>Submissão</h3>
<p>A parte de submissão da solução em python é facilitada pelo site. Ao selecionar a linguagem python para a solução do desafio será exibido o código abaixo:</p>
<pre class="python"><code>#!/bin/python3

import math
import os
import random
import re
import sys


# Complete the utopianTree function below.
def utopianTree():
    # VOCÊ DEVE INSERIR SUA FUNÇÃO AQUI!

if __name__ == &#39;__main__&#39;:
    fptr = open(os.environ[&#39;OUTPUT_PATH&#39;], &#39;w&#39;)

    t = int(input())

    for t_itr in range(t):
        n = int(input())

        result = utopianTree(n)

        fptr.write(str(result) + &#39;\n&#39;)

    fptr.close()</code></pre>
<p>A única coisa que precisa ser feita é completar a função e submeter o código. O código para a leitura dos dados de entrada e o consumo dos dados de saída já estão prontos. Isso é feito pelo trecho de código que começa com <code>if __name__ == '__main__':</code>.</p>
<div id="solucao-completa-em-python" class="section level4">
<h4>Solução completa em python</h4>
<p>A solução completa em python ficaria assim:</p>
<pre class="python"><code>#!/bin/python3

import math
import os
import random
import re
import sys


# Complete the utopianTree function below.
def utopianTree(n):
    # altura inicial
    height = 1
    # se a árvore não passou por nenhum ciclo, sua altura é igual à inicial.
    if n == 0:
        return height
    # do contrário, é necessário definir os ciclos de primavera e os de verão.
    else:
        for cycle in range(1, n + 1):
            # ciclos de primavera.
            if cycle % 2 != 0:
                height *= 2
            # ciclos de verão.
            elif cycle % 2 == 0:
                height += 1

        return height

if __name__ == &#39;__main__&#39;:
    fptr = open(os.environ[&#39;OUTPUT_PATH&#39;], &#39;w&#39;)

    t = int(input())

    for t_itr in range(t):
        n = int(input())

        result = utopianTree(n)

        fptr.write(str(result) + &#39;\n&#39;)

    fptr.close()</code></pre>
</div>
</div>
</div>
<div id="construindo-a-funcao-em-r" class="section level2">
<h2>Construindo a função em R</h2>
<p>A função em R é relativamente parecida com a função em python. Mas existem duas diferenças importantes: a primeira é como a função deve retornar os dados de saída e a segunda é como o código deve ser submetido.</p>
<pre class="r"><code>utopian_tree &lt;- function(n) {
  # altura inicial
  heigth &lt;- 1
  # se a árvore não passou por nenhum ciclo, sua altura é igual à inicial.
  if (n == 0) {
    write(as.character(heigth), stdout())
  } else {
    # do contrário, é necessário definir os ciclos de primavera e os de verão.
    for (cycle in 1:n) {
      # ciclos de primavera.
      if (cycle %% 2 != 0) {
        heigth &lt;- heigth * 2
        # ciclos de verão.
      } else if (cycle %% 2 == 0) {
        heigth &lt;- heigth + 1
        }
    }
    write(as.character(heigth), stdout())
  }
}</code></pre>
<p>A primeira diferença é a forma como essa função precisa retornar os resultados. Em python, podemos usar o <code>return heigth</code>. Em R, poderíamos usar <code>return(height)</code>. Mas nesse caso em específico precisa ser usando <code>write(as.character(heigth), stdout())</code>. É dessa forma que o site vai consumir os dados de saída da função.</p>
<p>Usando os dados da tabela, se a árvore passar por 2 ciclos, o resultado deve ser igual a 3.</p>
<pre class="r"><code>utopian_tree(2)</code></pre>
<pre><code>## 3</code></pre>
<p>Mas se a árvore passar por 4 ciclos, o resultado deve ser igual a 7.</p>
<pre class="r"><code>utopian_tree(4)</code></pre>
<pre><code>## 7</code></pre>
<div id="submissao-1" class="section level3">
<h3>Submissão</h3>
<p>Quando selecionamos a linguagem R para resolver o desafio, a única mensagem que vemos no editor é:</p>
<pre class="r"><code># Enter your code here. Read input from STDIN. Print output to STDOUT</code></pre>
<p>Isso quer dizer que devemos importar os dados de alguma forma. Nesta <a href="https://www.hackerrank.com/tests/info/faq">página</a> você pode encontrar como ler os dados de entrada usando diferentes linguagens. A solução que funcionou comigo (obviamente não é a única) foi a seguinte:</p>
<pre class="r"><code># lendo os dados de entrada. 
# lembrando que o primeiro valor é o número de vezes que a função será testada.
sample_input &lt;- suppressWarnings(readLines(file(&quot;stdin&quot;)))

# assim, criamos um objeto contendo o número de testes.
n_test_cases &lt;- as.numeric(sample_input[1])

# e criamos um outro vetor com os ciclos que serão usados em cada teste.
n_cycles &lt;- as.numeric(sample_input[-1])</code></pre>
<p>Para finalizar, amarramos a função em um loop <code>for</code>:</p>
<pre class="r"><code># testando a função &#39;n_test_cases&#39; vezes
for (test in 1:n_test_cases){
  utopian_tree(n_cycles[test])
}</code></pre>
<div id="solucao-completa-em-r" class="section level4">
<h4>Solução completa em R</h4>
<p>A solução completa em R fica assim:</p>
<pre class="r"><code># lendo os dados de entrada. 
# lembrando que o primeiro valor é o número de vezes que a função será testada.
sample_input &lt;- suppressWarnings(readLines(file(&quot;stdin&quot;)))

# assim, criamos um objeto contendo o número de testes.
n_test_cases &lt;- as.numeric(sample_input[1])

# e criamos um outro vetor com os ciclos que serão usados em cada teste.
n_cycles &lt;- as.numeric(sample_input[-1])

utopian_tree &lt;- function(n) {
  # altura inicial
  heigth &lt;- 1
  # se a árvore não passou por nenhum ciclo, sua altura é igual à inicial.
  if (n == 0) {
    write(as.character(heigth), stdout())
  } else {
    # do contrário, é necessário definir os ciclos de primavera e os de verão.
    for (cycle in 1:n) {
      # ciclos de primavera.
      if (cycle %% 2 != 0) {
        heigth &lt;- heigth * 2
        # ciclos de verão.
      } else if (cycle %% 2 == 0) {
        heigth &lt;- heigth + 1
        }
    }
    write(as.character(heigth), stdout())
  }
}

# testando a função &#39;n_test_cases&#39; vezes
for (test in 1:n_test_cases){
  utopian_tree(n_cycles[test])
}</code></pre>
<p>É isso!</p>
</div>
</div>
</div>
